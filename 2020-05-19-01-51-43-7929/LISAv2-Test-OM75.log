05/19/2020 08:51:43 : [INFO ] Import test parameters from provided XML file .\TestParameters.xml ...
05/19/2020 08:51:43 : [INFO ] Setting parameter: TestPlatform = Azure
05/19/2020 08:51:43 : [INFO ] Setting parameter: TestLocation = eastus2
05/19/2020 08:51:43 : [INFO ] Setting parameter: RGIdentifier = walaautodev
05/19/2020 08:51:43 : [INFO ] Setting parameter: StorageAccount = walaautol2
05/19/2020 08:51:43 : [INFO ] Setting parameter: OsVHD = https://walaautol2.blob.core.windows.net/vhds/RHEL-8.2.0-updates-20200423.0.vhd
05/19/2020 08:51:43 : [INFO ] Setting parameter: TestCategory = Functional
05/19/2020 08:51:43 : [INFO ] Setting parameter: TestNames = VERIFY-RESTART-INTERFACE-RELOAD-NETVSC,ETHTOOL-GET-FEATURES,ETHTOOL-GET-SET-RINGBUFFER,ETHTOOL-GET-SET-TCP-HASHLEVELS,ETHTOOL-GET-SET-UDP-HASHLEVELS,ETHTOOL-GET-SET-GRO-LRO,ETHTOOL-GET-SET-CHANNEL,ETHTOOL-GET-SET-MSG-LEVEL,ETHTOOL-GET-SET-RSS-HASH-KEY,ETHTOOL-GET-SET-LINK-KSETTING,ETHTOOL-GET-MISC-INFO,ETHTOOL-GET-STATISTICS,NETWORK-ADD-MAX-SYNTHETIC-NICS-DURING-PROVISION,NETWORK-ADD-MAX-SYNTHETIC-NICS-AFTER-PROVISION,NET-IFUP-IFDOWN,NET-SET-STATIC-MAC,SRIOV-VERIFY-LSPCI,SRIOV-VERIFY-SINGLE-VF-CONNECTION,SRIOV-VERIFY-MAX-VF-CONNECTION,SRIOV-ADD-MAX-NICS-DURING-PROVISION,SRIOV-ADD-MAX-NICS-AFTER-PROVISION,SRIOV-DISABLE-ENABLE-AN,SRIOV-INTERRUPTS-CHANGE,SRIOV-DISABLEVF-ON-GUEST,SRIOV-RELOAD-MODULE,SRIOV-DISABLE-ENABLE-PCI,VERIFY-DISK-WITH-NOBARRIER,STORAGE-HOT-ADD-DISK-SERIAL,STORAGE-HOT-ADD-DISK-PARALLEL,VERIFY-DEPLOYMENT-PROVISION,VERIFY-DEPLOYMENT-PROVISION-EPHEMERAL-MANAGED-DISK,VERIFY-DEPLOYMENT-PROVISION-SRIOV,VERIFY-LINUX-CONFIGURATION,LIS-MODULES-CHECK,VERIFY-LIS-MODULES-VERSION,VERIFY-BOOT-ERROR-WARNINGS,TIME-CLOCKSOURCE,TIME-CLOCKEVENT-UP,TIME-CLOCKEVENT-SMP,INITRD-MODULES-CHECK,CPU-VERIFY-ONLINE,RELOAD-MODULES-SMP,LSVMBUS,VMBUS_VERIFY_INTERRUPTS,VMBUS_VERIFY_HEARTBEAT_PROPERTIES,KDUMP-CRASH-SMP,KDUMP-CRASH-DIFFERENT-VCPU,VM-HOT-RESIZE,L3-CACHE-CHECK,VERIFY-LINUX-DISK-SETUP
05/19/2020 08:51:43 : [INFO ] Setting parameter: ResourceCleanup = Keep
05/19/2020 08:51:43 : [INFO ] Setting parameter: ExitWithZero = $true
05/19/2020 08:51:43 : [INFO ] Setting parameter: ParametersFile = .\TestParameters.xml
05/19/2020 08:51:43 : [INFO ] Overwriting parameter TestNames value: VERIFY-RESTART-INTERFACE-RELOAD-NETVSC,ETHTOOL-GET-FEATURES,ETHTOOL-GET-SET-RINGBUFFER,ETHTOOL-GET-SET-TCP-HASHLEVELS,ETHTOOL-GET-SET-UDP-HASHLEVELS,ETHTOOL-GET-SET-GRO-LRO,ETHTOOL-GET-SET-CHANNEL,ETHTOOL-GET-SET-MSG-LEVEL,ETHTOOL-GET-SET-RSS-HASH-KEY,ETHTOOL-GET-SET-LINK-KSETTING,ETHTOOL-GET-MISC-INFO,ETHTOOL-GET-STATISTICS,NETWORK-ADD-MAX-SYNTHETIC-NICS-DURING-PROVISION,NETWORK-ADD-MAX-SYNTHETIC-NICS-AFTER-PROVISION,NET-IFUP-IFDOWN,NET-SET-STATIC-MAC,SRIOV-VERIFY-LSPCI,SRIOV-VERIFY-SINGLE-VF-CONNECTION,SRIOV-VERIFY-MAX-VF-CONNECTION,SRIOV-ADD-MAX-NICS-DURING-PROVISION,SRIOV-ADD-MAX-NICS-AFTER-PROVISION,SRIOV-DISABLE-ENABLE-AN,SRIOV-INTERRUPTS-CHANGE,SRIOV-DISABLEVF-ON-GUEST,SRIOV-RELOAD-MODULE,SRIOV-DISABLE-ENABLE-PCI,VERIFY-DISK-WITH-NOBARRIER,STORAGE-HOT-ADD-DISK-SERIAL,STORAGE-HOT-ADD-DISK-PARALLEL,VERIFY-DEPLOYMENT-PROVISION,VERIFY-DEPLOYMENT-PROVISION-EPHEMERAL-MANAGED-DISK,VERIFY-DEPLOYMENT-PROVISION-SRIOV,VERIFY-LINUX-CONFIGURATION,LIS-MODULES-CHECK,VERIFY-LIS-MODULES-VERSION,VERIFY-BOOT-ERROR-WARNINGS,TIME-CLOCKSOURCE,TIME-CLOCKEVENT-UP,TIME-CLOCKEVENT-SMP,INITRD-MODULES-CHECK,CPU-VERIFY-ONLINE,RELOAD-MODULES-SMP,LSVMBUS,VMBUS_VERIFY_INTERRUPTS,VMBUS_VERIFY_HEARTBEAT_PROPERTIES,KDUMP-CRASH-SMP,KDUMP-CRASH-DIFFERENT-VCPU,VM-HOT-RESIZE,L3-CACHE-CHECK,VERIFY-LINUX-DISK-SETUP -> KDUMP-CRASH-DIFFERENT-VCPU,KDUMP-CRASH-SMP,KDUMP-CRASH-16-CORES
05/19/2020 08:51:43 : [INFO ] Setting parameter: TestIterations = 1
05/19/2020 08:51:43 : [INFO ] Setting parameter: XMLSecretFile = .\secret.xml
05/19/2020 08:51:43 : [INFO ] Test parameters for Azure have been validated successfully. Continue running the test.
05/19/2020 08:51:43 : [INFO ] Refreshed Blob Storage Location information, https://yujiangsriovdisks.blob.core.windows.net/yujiang
05/19/2020 08:51:44 : [INFO ] Updated Test Case xml files.
05/19/2020 08:51:44 : [INFO ] Updated E:\yuxisun\LISAv2\XML\RegionAndStorageAccounts.xml from secrets file.
05/19/2020 08:51:44 : [INFO ] Using provided secrets file: .\secret.xml
05/19/2020 08:51:44 : [INFO ] .\secret.xml found.
05/19/2020 08:51:44 : [INFO ] ------------------------------------------------------------------
05/19/2020 08:51:44 : [WARN ] No Azure authentication methods were available in Secret File.
05/19/2020 08:51:44 : [WARN ] No Azure authentication context files detected in E:\yuxisun\LISAv2.
05/19/2020 08:51:44 : [INFO ] Checking if Current Azure powershell session is authenticated...
05/19/2020 08:51:52 : [INFO ] Current Azure powershell session is authenticated by yuxisun@redhat.com.
05/19/2020 08:51:56 : [INFO ] Current Subscription : 27523af7-xxxx-xxxx-xxxx-070881f968e8.
05/19/2020 08:51:56 : [INFO ] ------------------------------------------------------------------
05/19/2020 08:51:58 : [INFO ] Selecting custom storage account : walaautol2 as per your test region.
05/19/2020 08:51:58 : [INFO ] ------------------------------------------------------------------
05/19/2020 08:52:01 : [INFO ] SubscriptionName       : BorisB-External-Partner
05/19/2020 08:52:01 : [INFO ] SubscriptionId         : 27523af7-xxxx-xxxx-xxxx-070881f968e8
05/19/2020 08:52:01 : [INFO ] User                   : yuxisun@redhat.com
05/19/2020 08:52:01 : [INFO ] ServiceEndpoint        : https://management.core.windows.net/
05/19/2020 08:52:01 : [INFO ] CurrentStorageAccount  : walaautol2
05/19/2020 08:52:01 : [INFO ] ------------------------------------------------------------------
05/19/2020 08:52:01 : [INFO ] Setting global variables
05/19/2020 08:52:01 : [INFO ] Validating XML Files from E:\yuxisun\LISAv2 folder recursively...
05/19/2020 08:52:02 : [INFO ] Collected test: KDUMP-CRASH-SMP from E:\yuxisun\LISAv2\XML\TestCases\FunctionalTests.xml
05/19/2020 08:52:02 : [INFO ] Collected test: KDUMP-CRASH-DIFFERENT-VCPU from E:\yuxisun\LISAv2\XML\TestCases\FunctionalTests.xml
05/19/2020 08:52:02 : [INFO ] Collected test: KDUMP-CRASH-16-CORES from E:\yuxisun\LISAv2\XML\TestCases\FunctionalTests.xml
05/19/2020 08:52:02 : [INFO ] 3 Test Cases have been collected
05/19/2020 08:52:02 : [INFO ] KEXEC_VERSION=2.0.18 injected to case KDUMP-CRASH-SMP
05/19/2020 08:52:02 : [INFO ] KEXEC_VERSION=2.0.18 injected to case KDUMP-CRASH-DIFFERENT-VCPU
05/19/2020 08:52:02 : [INFO ] KEXEC_VERSION=2.0.18 injected to case KDUMP-CRASH-16-CORES
05/19/2020 08:52:02 : [INFO ] Prepare test image if required ...
05/19/2020 08:52:07 : [INFO ] New Base VHD name - https://walaautol2.blob.core.windows.net/vhds/RHEL-8.2.0-updates-20200423.0.vhd
05/19/2020 08:52:07 : [INFO ] Prepare test log structure and start testing now ...
05/19/2020 08:52:07 : [INFO ] (1/3) testing started: KDUMP-CRASH-DIFFERENT-VCPU
05/19/2020 08:52:07 : [INFO ] Deploy target machine for test if required ...
05/19/2020 08:52:07 : [INFO ] Current test setup: OneVM
05/19/2020 08:52:07 : [INFO ] Checking the subscription usage...
05/19/2020 08:52:08 : [INFO ] Getting Azure 'ComputeSKU' details...
05/19/2020 08:52:35 : [INFO ] Estimating VM #1 usage.
05/19/2020 08:52:37 : [INFO ]   Current Regional Cores usage : 154 cores. Requested:4. Estimated usage=158. Max Allowed cores:944/944
05/19/2020 08:52:37 : [INFO ]   Current standardDSv2Family usage : 16 cores. Requested:4. Estimated usage=20. Max Allowed cores:100/100
05/19/2020 08:52:39 : [INFO ] Current 'Resource Group' usage:110. Requested:1. Estimated usage:111. Maximum allowed:980/980.
05/19/2020 08:52:40 : [INFO ] Current 'Storage Account' usage:7. Requested:1. Estimated usage:8. Maximum allowed:250/250.
05/19/2020 08:52:42 : [INFO ] Current 'Public IP' usage:11. Requested:1. Estimated usage:12. Maximum allowed:1000/1000.
05/19/2020 08:52:42 : [INFO ] Current 'Virtual Network' usage:12. Requested:1. Estimated usage:13. Maximum allowed:1000/1000.
05/19/2020 08:52:42 : [INFO ] Current 'Network Security Group' usage:6. Requested:1. Estimated usage:7. Maximum allowed:5000/5000.
05/19/2020 08:52:42 : [INFO ] Current 'Load Balancer' usage:5. Requested:1. Estimated usage:6. Maximum allowed:1000/1000.
05/19/2020 08:52:42 : [INFO ] Estimated subscription usage is under allowed limits.
05/19/2020 08:52:42 : [INFO ] Creating Resource Group : LISAv2-OneVM-walaautodev-OM75-20200519015242.
05/19/2020 08:52:42 : [INFO ] Verifying that Resource group name is not in use.
05/19/2020 08:52:42 : [INFO ] Try to delete resource group LISAv2-OneVM-walaautodev-OM75-20200519015242...
05/19/2020 08:52:43 : [INFO ] LISAv2-OneVM-walaautodev-OM75-20200519015242 does not exists.
05/19/2020 08:52:43 : [INFO ] Using location : eastus2
05/19/2020 08:52:48 : [INFO ] Resource Group LISAv2-OneVM-walaautodev-OM75-20200519015242 created.
05/19/2020 08:52:49 : [INFO ] Setting LISAv2-OneVM-walaautodev-OM75-20200519015242 tag : BuildUser = yuxisun
05/19/2020 08:52:55 : [INFO ] Setting LISAv2-OneVM-walaautodev-OM75-20200519015242 tag : BuildURL = NA
05/19/2020 08:53:02 : [INFO ] Setting LISAv2-OneVM-walaautodev-OM75-20200519015242 tag : TestName = KDUMP-CRASH-DIFFERENT-VCPU
05/19/2020 08:53:07 : [INFO ] Setting LISAv2-OneVM-walaautodev-OM75-20200519015242 tag : BuildMachine = HYPERV\YUXISUN-WIN10
05/19/2020 08:53:12 : [INFO ] Setting LISAv2-OneVM-walaautodev-OM75-20200519015242 tag : CreationTime = 2020/05/19 08:53:12
05/19/2020 08:53:17 : [INFO ] test platform is : Azure
05/19/2020 08:53:17 : [INFO ] [Attempt 1/999] : Getting Existing Storage account information...
05/19/2020 08:53:19 : [INFO ] Generating Template : E:\yuxisun\LISAv2\Temp\LISAv2-OneVM-walaautodev-OM75-20200519015242.json
05/19/2020 08:53:19 : [INFO ] Using API VERSION : 2018-04-01
05/19/2020 08:53:19 : [INFO ] Added Variables..
05/19/2020 08:53:19 : [INFO ] Added availabilitySet LISAv2-AvailabilitySet..
05/19/2020 08:53:20 : [INFO ] Added Public IP Address LISAv2-PublicIPv4-12211..
05/19/2020 08:53:20 : [INFO ] Added Custom image 'LISAv2-OneVM-walaautodev-OM75-20200519015242-Image' from 'RHEL-8.2.0-updates-20200423.0.vhd'..
05/19/2020 08:53:20 : [INFO ] Added Default Subnet to LISAv2-VirtualNetwork..
05/19/2020 08:53:20 : [INFO ] Added Virtual Network LISAv2-VirtualNetwork..
05/19/2020 08:53:20 : [INFO ] Adding Load Balancer ...
05/19/2020 08:53:21 : [INFO ] Added inboundNatRule Name:LISAv2-OneVM-walaautodev-OM75-20200519015242-role-0-SSH frontendPort:22 backendPort:22 Protocol:tcp.
05/19/2020 08:53:21 : [INFO ] Added Load Balancer.
05/19/2020 08:53:21 : [INFO ] Adding Network Interface Card LISAv2-OneVM-walaautodev-OM75-20200519015242-role-0-PrimaryNIC
05/19/2020 08:53:21 : [INFO ] Enabled inboundNatRule Name:LISAv2-OneVM-walaautodev-OM75-20200519015242-role-0-SSH frontendPort:22 backendPort:22 Protocol:tcp to LISAv2-OneVM-walaautodev-OM75-20200519015242-role-0-PrimaryNIC.
05/19/2020 08:53:21 : [INFO ] Added NIC LISAv2-OneVM-walaautodev-OM75-20200519015242-role-0-PrimaryNIC..
05/19/2020 08:53:21 : [INFO ] Adding Virtual Machine LISAv2-OneVM-walaautodev-OM75-20200519015242-role-0
05/19/2020 08:53:21 : [INFO ] >>> Using VHD : RHEL-8.2.0-updates-20200423.0.vhd (Converted to Managed Image)
05/19/2020 08:53:22 : [INFO ] Added Managed-Persistent OS disk : LISAv2-OneVM-walaautodev-OM75-20200519015242-role-0-OSDisk
05/19/2020 08:53:22 : [INFO ] Added Virtual Machine LISAv2-OneVM-walaautodev-OM75-20200519015242-role-0
05/19/2020 08:53:22 : [INFO ] Template generated successfully.
05/19/2020 08:53:22 : [INFO ] Testing Deployment using E:\yuxisun\LISAv2\Temp\LISAv2-OneVM-walaautodev-OM75-20200519015242.json ...
05/19/2020 08:53:26 : [INFO ] Creating Deployment using E:\yuxisun\LISAv2\Temp\LISAv2-OneVM-walaautodev-OM75-20200519015242.json ...
05/19/2020 08:55:38 : [INFO ] Resource Group Deployment created.
05/19/2020 08:55:38 : [INFO ] Collecting LISAv2-OneVM-walaautodev-OM75-20200519015242 data..
05/19/2020 08:55:38 : [INFO ]     Microsoft.Compute/virtualMachines data collection in progress..
05/19/2020 08:55:39 : [INFO ]     Microsoft.Network/networkInterfaces data collection in progress..
05/19/2020 08:55:42 : [INFO ]     Microsoft.Network/loadBalancers data collection in progress..
05/19/2020 08:55:43 : [INFO ]     Microsoft.Network/publicIPAddresses data collection in progress..
05/19/2020 08:55:50 : [INFO ] Collected LISAv2-OneVM-walaautodev-OM75-20200519015242 data!
05/19/2020 08:55:50 : [INFO ] Trying to connect to deployed VMs.
05/19/2020 08:55:51 : [INFO ] Connecting to 52.177.121.168 : 22 succeeded.
05/19/2020 08:55:51 : [INFO ] The SSH ports for all VMs are open.
05/19/2020 08:55:51 : [INFO ] Skipping boot data telemetry collection.
05/19/2020 08:55:51 : [INFO ] Check if execution folder /home/azureuser exists or not, if not, create one.
05/19/2020 08:55:55 : [DEBUG] Execution folder /home/azureuser exists.
05/19/2020 08:55:55 : [DEBUG] dos2unix: converting file E:/yuxisun/LISAv2/TestResults/2020-05-19-01-51-43-7929/runtest.sh to Unix format...
05/19/2020 08:55:55 : [DEBUG] Uploading E:\yuxisun\LISAv2\TestResults\2020-05-19-01-51-43-7929\runtest.sh to azureuser @ 52.177.121.168 : 22 using password authentication
05/19/2020 08:56:01 : [DEBUG] Upload successful after 1 attempt
05/19/2020 08:56:01 : [DEBUG] .\Tools\plink.exe -ssh -t -pw ****** -P 22 azureuser@52.177.121.168 "uname -r"
05/19/2020 08:56:06 : [DEBUG] uname -r executed successfully in 4.32 seconds.
05/19/2020 08:56:06 : [INFO ] Initial Kernel Version: 4.18.0-193.el8.x86_64
05/19/2020 08:56:06 : [DEBUG] dos2unix: converting file ./Testscripts/Linux/DetectLinuxDistro.sh to Unix format...
05/19/2020 08:56:06 : [DEBUG] Uploading .\Testscripts\Linux\DetectLinuxDistro.sh to azureuser @ 52.177.121.168 : 22 using password authentication
05/19/2020 08:56:12 : [DEBUG] Upload successful after 1 attempt
05/19/2020 08:56:12 : [DEBUG] dos2unix: converting file E:/yuxisun/LISAv2/TestResults/2020-05-19-01-51-43-7929/runtest.sh to Unix format...
05/19/2020 08:56:12 : [DEBUG] Uploading E:\yuxisun\LISAv2\TestResults\2020-05-19-01-51-43-7929\runtest.sh to azureuser @ 52.177.121.168 : 22 using password authentication
05/19/2020 08:56:18 : [DEBUG] Upload successful after 1 attempt
05/19/2020 08:56:18 : [DEBUG] .\Tools\plink.exe -ssh -t -pw ****** -P 22 azureuser@52.177.121.168 "echo ****** | sudo -S chmod +x *.sh"
05/19/2020 08:56:24 : [DEBUG] chmod +x *.sh executed successfully in 5.45 seconds.
05/19/2020 08:56:24 : [DEBUG] dos2unix: converting file E:/yuxisun/LISAv2/TestResults/2020-05-19-01-51-43-7929/runtest.sh to Unix format...
05/19/2020 08:56:24 : [DEBUG] Uploading E:\yuxisun\LISAv2\TestResults\2020-05-19-01-51-43-7929\runtest.sh to azureuser @ 52.177.121.168 : 22 using password authentication
05/19/2020 08:56:30 : [DEBUG] Upload successful after 1 attempt
05/19/2020 08:56:30 : [DEBUG] .\Tools\plink.exe -ssh -t -pw ****** -P 22 azureuser@52.177.121.168 "echo ****** | sudo -S bash ./DetectLinuxDistro.sh"
05/19/2020 08:56:34 : [DEBUG] bash ./DetectLinuxDistro.sh executed successfully in 4.27 seconds.
05/19/2020 08:56:34 : [DEBUG] Set $fdisk > fdisk for REDHAT
05/19/2020 08:56:34 : [INFO ] Linux distro detected: REDHAT
05/19/2020 08:56:34 : [INFO ] Run test case against the target machine ...
05/19/2020 09:03:40 : [WARN ] ResourceCleanup = 'Keep' is respected, you may need to delete the testing resources * MANUALLY * sometime later.
05/19/2020 09:03:40 : [INFO ] (2/3) testing started: KDUMP-CRASH-16-CORES
05/19/2020 09:03:40 : [INFO ] Deploy target machine for test if required ...
05/19/2020 09:03:40 : [INFO ] Current test setup: OneVM
05/19/2020 09:03:41 : [INFO ] Checking the subscription usage...
05/19/2020 09:03:41 : [INFO ] Getting Azure 'ComputeSKU' details...
05/19/2020 09:04:07 : [INFO ] Estimating VM #1 usage.
05/19/2020 09:04:09 : [INFO ]   Current Regional Cores usage : 158 cores. Requested:16. Estimated usage=174. Max Allowed cores:944/944
05/19/2020 09:04:09 : [INFO ]   Current standardDSv2Family usage : 20 cores. Requested:16. Estimated usage=36. Max Allowed cores:100/100
05/19/2020 09:04:10 : [INFO ] Current 'Resource Group' usage:111. Requested:1. Estimated usage:112. Maximum allowed:980/980.
05/19/2020 09:04:12 : [INFO ] Current 'Storage Account' usage:7. Requested:1. Estimated usage:8. Maximum allowed:250/250.
05/19/2020 09:04:14 : [INFO ] Current 'Public IP' usage:12. Requested:1. Estimated usage:13. Maximum allowed:1000/1000.
05/19/2020 09:04:14 : [INFO ] Current 'Virtual Network' usage:13. Requested:1. Estimated usage:14. Maximum allowed:1000/1000.
05/19/2020 09:04:14 : [INFO ] Current 'Network Security Group' usage:6. Requested:1. Estimated usage:7. Maximum allowed:5000/5000.
05/19/2020 09:04:14 : [INFO ] Current 'Load Balancer' usage:6. Requested:1. Estimated usage:7. Maximum allowed:1000/1000.
05/19/2020 09:04:14 : [INFO ] Estimated subscription usage is under allowed limits.
05/19/2020 09:04:14 : [INFO ] Creating Resource Group : LISAv2-OneVM-walaautodev-OM75-20200519020414.
05/19/2020 09:04:14 : [INFO ] Verifying that Resource group name is not in use.
05/19/2020 09:04:14 : [INFO ] Try to delete resource group LISAv2-OneVM-walaautodev-OM75-20200519020414...
05/19/2020 09:04:15 : [INFO ] LISAv2-OneVM-walaautodev-OM75-20200519020414 does not exists.
05/19/2020 09:04:15 : [INFO ] Using location : eastus2
05/19/2020 09:04:19 : [INFO ] Resource Group LISAv2-OneVM-walaautodev-OM75-20200519020414 created.
05/19/2020 09:04:19 : [INFO ] Setting LISAv2-OneVM-walaautodev-OM75-20200519020414 tag : BuildUser = yuxisun
05/19/2020 09:04:24 : [INFO ] Setting LISAv2-OneVM-walaautodev-OM75-20200519020414 tag : BuildURL = NA
05/19/2020 09:04:31 : [INFO ] Setting LISAv2-OneVM-walaautodev-OM75-20200519020414 tag : TestName = KDUMP-CRASH-16-CORES
05/19/2020 09:04:35 : [INFO ] Setting LISAv2-OneVM-walaautodev-OM75-20200519020414 tag : BuildMachine = HYPERV\YUXISUN-WIN10
05/19/2020 09:04:41 : [INFO ] Setting LISAv2-OneVM-walaautodev-OM75-20200519020414 tag : CreationTime = 2020/05/19 09:04:41
05/19/2020 09:04:46 : [INFO ] test platform is : Azure
05/19/2020 09:04:46 : [INFO ] [Attempt 1/999] : Getting Existing Storage account information...
05/19/2020 09:04:48 : [INFO ] Generating Template : E:\yuxisun\LISAv2\Temp\LISAv2-OneVM-walaautodev-OM75-20200519020414.json
05/19/2020 09:04:48 : [INFO ] Using API VERSION : 2018-04-01
05/19/2020 09:04:49 : [INFO ] Added Variables..
05/19/2020 09:04:49 : [INFO ] Added availabilitySet LISAv2-AvailabilitySet..
05/19/2020 09:04:49 : [INFO ] Added Public IP Address LISAv2-PublicIPv4-58060..
05/19/2020 09:04:49 : [INFO ] Added Custom image 'LISAv2-OneVM-walaautodev-OM75-20200519020414-Image' from 'RHEL-8.2.0-updates-20200423.0.vhd'..
05/19/2020 09:04:50 : [INFO ] Added Default Subnet to LISAv2-VirtualNetwork..
05/19/2020 09:04:50 : [INFO ] Added Virtual Network LISAv2-VirtualNetwork..
05/19/2020 09:04:50 : [INFO ] Adding Load Balancer ...
05/19/2020 09:04:50 : [INFO ] Added inboundNatRule Name:LISAv2-OneVM-walaautodev-OM75-20200519020414-role-0-SSH frontendPort:22 backendPort:22 Protocol:tcp.
05/19/2020 09:04:50 : [INFO ] Added Load Balancer.
05/19/2020 09:04:50 : [INFO ] Adding Network Interface Card LISAv2-OneVM-walaautodev-OM75-20200519020414-role-0-PrimaryNIC
05/19/2020 09:04:51 : [INFO ] Enabled inboundNatRule Name:LISAv2-OneVM-walaautodev-OM75-20200519020414-role-0-SSH frontendPort:22 backendPort:22 Protocol:tcp to LISAv2-OneVM-walaautodev-OM75-20200519020414-role-0-PrimaryNIC.
05/19/2020 09:04:51 : [INFO ] Added NIC LISAv2-OneVM-walaautodev-OM75-20200519020414-role-0-PrimaryNIC..
05/19/2020 09:04:51 : [INFO ] Adding Virtual Machine LISAv2-OneVM-walaautodev-OM75-20200519020414-role-0
05/19/2020 09:04:51 : [INFO ] >>> Using VHD : RHEL-8.2.0-updates-20200423.0.vhd (Converted to Managed Image)
05/19/2020 09:04:51 : [INFO ] Added Managed-Persistent OS disk : LISAv2-OneVM-walaautodev-OM75-20200519020414-role-0-OSDisk
05/19/2020 09:04:51 : [INFO ] Added Virtual Machine LISAv2-OneVM-walaautodev-OM75-20200519020414-role-0
05/19/2020 09:04:51 : [INFO ] Template generated successfully.
05/19/2020 09:04:51 : [INFO ] Testing Deployment using E:\yuxisun\LISAv2\Temp\LISAv2-OneVM-walaautodev-OM75-20200519020414.json ...
05/19/2020 09:04:56 : [INFO ] Creating Deployment using E:\yuxisun\LISAv2\Temp\LISAv2-OneVM-walaautodev-OM75-20200519020414.json ...
05/19/2020 09:07:13 : [INFO ] Resource Group Deployment created.
05/19/2020 09:07:13 : [INFO ] Collecting LISAv2-OneVM-walaautodev-OM75-20200519020414 data..
05/19/2020 09:07:13 : [INFO ]     Microsoft.Compute/virtualMachines data collection in progress..
05/19/2020 09:07:14 : [INFO ]     Microsoft.Network/networkInterfaces data collection in progress..
05/19/2020 09:07:16 : [INFO ]     Microsoft.Network/loadBalancers data collection in progress..
05/19/2020 09:07:17 : [INFO ]     Microsoft.Network/publicIPAddresses data collection in progress..
05/19/2020 09:07:25 : [INFO ] Collected LISAv2-OneVM-walaautodev-OM75-20200519020414 data!
05/19/2020 09:07:25 : [INFO ] Trying to connect to deployed VMs.
05/19/2020 09:07:25 : [INFO ] Connecting to 52.177.1.242 : 22 succeeded.
05/19/2020 09:07:25 : [INFO ] The SSH ports for all VMs are open.
05/19/2020 09:07:25 : [INFO ] Skipping boot data telemetry collection.
05/19/2020 09:07:25 : [INFO ] Run test case against the target machine ...
05/19/2020 09:13:19 : [WARN ] ResourceCleanup = 'Keep' is respected, you may need to delete the testing resources * MANUALLY * sometime later.
05/19/2020 09:13:19 : [INFO ] (3/3) testing started: KDUMP-CRASH-SMP
05/19/2020 09:13:19 : [INFO ] Deploy target machine for test if required ...
05/19/2020 09:13:19 : [INFO ] Current test setup: OneVM
05/19/2020 09:13:20 : [INFO ] Checking the subscription usage...
05/19/2020 09:13:20 : [INFO ] Getting Azure 'ComputeSKU' details...
05/19/2020 09:13:49 : [INFO ] Estimating VM #1 usage.
05/19/2020 09:13:51 : [INFO ]   Current Regional Cores usage : 174 cores. Requested:2. Estimated usage=176. Max Allowed cores:944/944
05/19/2020 09:13:51 : [INFO ]   Current standardDSv2Family usage : 36 cores. Requested:2. Estimated usage=38. Max Allowed cores:100/100
05/19/2020 09:13:52 : [INFO ] Current 'Resource Group' usage:112. Requested:1. Estimated usage:113. Maximum allowed:980/980.
05/19/2020 09:13:54 : [INFO ] Current 'Storage Account' usage:7. Requested:1. Estimated usage:8. Maximum allowed:250/250.
05/19/2020 09:13:55 : [INFO ] Current 'Public IP' usage:13. Requested:1. Estimated usage:14. Maximum allowed:1000/1000.
05/19/2020 09:13:55 : [INFO ] Current 'Virtual Network' usage:14. Requested:1. Estimated usage:15. Maximum allowed:1000/1000.
05/19/2020 09:13:55 : [INFO ] Current 'Network Security Group' usage:6. Requested:1. Estimated usage:7. Maximum allowed:5000/5000.
05/19/2020 09:13:55 : [INFO ] Current 'Load Balancer' usage:7. Requested:1. Estimated usage:8. Maximum allowed:1000/1000.
05/19/2020 09:13:55 : [INFO ] Estimated subscription usage is under allowed limits.
05/19/2020 09:13:55 : [INFO ] Creating Resource Group : LISAv2-OneVM-walaautodev-OM75-20200519021355.
05/19/2020 09:13:55 : [INFO ] Verifying that Resource group name is not in use.
05/19/2020 09:13:55 : [INFO ] Try to delete resource group LISAv2-OneVM-walaautodev-OM75-20200519021355...
05/19/2020 09:13:56 : [INFO ] LISAv2-OneVM-walaautodev-OM75-20200519021355 does not exists.
05/19/2020 09:13:56 : [INFO ] Using location : eastus2
05/19/2020 09:14:01 : [INFO ] Resource Group LISAv2-OneVM-walaautodev-OM75-20200519021355 created.
05/19/2020 09:14:01 : [INFO ] Setting LISAv2-OneVM-walaautodev-OM75-20200519021355 tag : BuildUser = yuxisun
05/19/2020 09:14:08 : [INFO ] Setting LISAv2-OneVM-walaautodev-OM75-20200519021355 tag : BuildURL = NA
05/19/2020 09:14:13 : [INFO ] Setting LISAv2-OneVM-walaautodev-OM75-20200519021355 tag : TestName = KDUMP-CRASH-SMP
05/19/2020 09:14:18 : [INFO ] Setting LISAv2-OneVM-walaautodev-OM75-20200519021355 tag : BuildMachine = HYPERV\YUXISUN-WIN10
05/19/2020 09:14:23 : [INFO ] Setting LISAv2-OneVM-walaautodev-OM75-20200519021355 tag : CreationTime = 2020/05/19 09:14:23
05/19/2020 09:14:29 : [INFO ] test platform is : Azure
05/19/2020 09:14:29 : [INFO ] [Attempt 1/999] : Getting Existing Storage account information...
05/19/2020 09:14:34 : [INFO ] Generating Template : E:\yuxisun\LISAv2\Temp\LISAv2-OneVM-walaautodev-OM75-20200519021355.json
05/19/2020 09:14:34 : [INFO ] Using API VERSION : 2018-04-01
05/19/2020 09:14:34 : [INFO ] Added Variables..
05/19/2020 09:14:34 : [INFO ] Added availabilitySet LISAv2-AvailabilitySet..
05/19/2020 09:14:34 : [INFO ] Added Public IP Address LISAv2-PublicIPv4-58510..
05/19/2020 09:14:35 : [INFO ] Added Custom image 'LISAv2-OneVM-walaautodev-OM75-20200519021355-Image' from 'RHEL-8.2.0-updates-20200423.0.vhd'..
05/19/2020 09:14:35 : [INFO ] Added Default Subnet to LISAv2-VirtualNetwork..
05/19/2020 09:14:35 : [INFO ] Added Virtual Network LISAv2-VirtualNetwork..
05/19/2020 09:14:35 : [INFO ] Adding Load Balancer ...
05/19/2020 09:14:35 : [INFO ] Added inboundNatRule Name:LISAv2-OneVM-walaautodev-OM75-20200519021355-role-0-SSH frontendPort:22 backendPort:22 Protocol:tcp.
05/19/2020 09:14:35 : [INFO ] Added Load Balancer.
05/19/2020 09:14:35 : [INFO ] Adding Network Interface Card LISAv2-OneVM-walaautodev-OM75-20200519021355-role-0-PrimaryNIC
05/19/2020 09:14:36 : [INFO ] Enabled inboundNatRule Name:LISAv2-OneVM-walaautodev-OM75-20200519021355-role-0-SSH frontendPort:22 backendPort:22 Protocol:tcp to LISAv2-OneVM-walaautodev-OM75-20200519021355-role-0-PrimaryNIC.
05/19/2020 09:14:36 : [INFO ] Added NIC LISAv2-OneVM-walaautodev-OM75-20200519021355-role-0-PrimaryNIC..
05/19/2020 09:14:36 : [INFO ] Adding Virtual Machine LISAv2-OneVM-walaautodev-OM75-20200519021355-role-0
05/19/2020 09:14:36 : [INFO ] >>> Using VHD : RHEL-8.2.0-updates-20200423.0.vhd (Converted to Managed Image)
05/19/2020 09:14:36 : [INFO ] Added Managed-Persistent OS disk : LISAv2-OneVM-walaautodev-OM75-20200519021355-role-0-OSDisk
05/19/2020 09:14:36 : [INFO ] Added Virtual Machine LISAv2-OneVM-walaautodev-OM75-20200519021355-role-0
05/19/2020 09:14:37 : [INFO ] Template generated successfully.
05/19/2020 09:14:37 : [INFO ] Testing Deployment using E:\yuxisun\LISAv2\Temp\LISAv2-OneVM-walaautodev-OM75-20200519021355.json ...
05/19/2020 09:14:40 : [INFO ] Creating Deployment using E:\yuxisun\LISAv2\Temp\LISAv2-OneVM-walaautodev-OM75-20200519021355.json ...
05/19/2020 09:16:46 : [INFO ] Resource Group Deployment created.
05/19/2020 09:16:46 : [INFO ] Collecting LISAv2-OneVM-walaautodev-OM75-20200519021355 data..
05/19/2020 09:16:46 : [INFO ]     Microsoft.Compute/virtualMachines data collection in progress..
05/19/2020 09:16:48 : [INFO ]     Microsoft.Network/networkInterfaces data collection in progress..
05/19/2020 09:16:50 : [INFO ]     Microsoft.Network/loadBalancers data collection in progress..
05/19/2020 09:16:51 : [INFO ]     Microsoft.Network/publicIPAddresses data collection in progress..
05/19/2020 09:16:58 : [INFO ] Collected LISAv2-OneVM-walaautodev-OM75-20200519021355 data!
05/19/2020 09:16:58 : [INFO ] Trying to connect to deployed VMs.
05/19/2020 09:16:59 : [INFO ] Connecting to 52.251.37.57 : 22 succeeded.
05/19/2020 09:16:59 : [INFO ] The SSH ports for all VMs are open.
05/19/2020 09:16:59 : [INFO ] Skipping boot data telemetry collection.
05/19/2020 09:16:59 : [INFO ] Run test case against the target machine ...
05/19/2020 09:22:50 : [WARN ] ResourceCleanup = 'Keep' is respected, you may need to delete the testing resources * MANUALLY * sometime later.
05/19/2020 09:22:50 : [INFO ] Cleanup test environment if required ...
05/19/2020 09:22:50 : [INFO ] Test OM75 finished
05/19/2020 09:22:50 : [INFO ] 
[LISAv2 Test Results Summary]
Test Run On           : 05/19/2020 08:52:07
VHD Under Test        : https://walaautol2.blob.core.windows.net/vhds/RHEL-8.2.0-updates-20200423.0.vhd
Test Category         : Functional
Initial Kernel Version: 4.18.0-193.el8.x86_64
Final Kernel Version  : 4.18.0-193.el8.x86_64
Total Test Cases      : 3 (3 Passed, 0 Failed, 0 Aborted, 0 Skipped)
Total Time (dd:hh:mm) : 0:0:30

   ID TestArea             TestCaseName                                                                TestResult TestDuration(in minutes) 
-------------------------------------------------------------------------------------------------------------------------------------------
    1 KDUMP                KDUMP-CRASH-DIFFERENT-VCPU                                                        PASS                  7.1 
    2 KDUMP                KDUMP-CRASH-16-CORES                                                              PASS                  5.9 
    3 KDUMP                KDUMP-CRASH-SMP                                                                   PASS                 5.85 


Logs can be found at E:\yuxisun\LISAv2\TestResults\2020-05-19-01-51-43-7929


05/19/2020 09:22:50 : [DEBUG] Creating 'E:\yuxisun\LISAv2\Azure-OM75-TestLogs.zip' from 'E:\yuxisun\LISAv2\TestResults\2020-05-19-01-51-43-7929'
05/19/2020 09:22:50 : [DEBUG] E:\yuxisun\LISAv2\Azure-OM75-TestLogs.zip created successfully.
05/19/2020 09:22:50 : [INFO ] Analyzing test results ...
05/19/2020 09:22:50 : [INFO ] LISAv2 exit code: 0
